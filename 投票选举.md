### 启动配置

* 验证节点数：最少 4 个，最多 100 个
* 信托节点数：最少 4 个，最多 15 个
* 分红周期：150 个块，约 5 分钟
* 验证节点选举周期（测试网）：2 个分红周期，300个块，约10分钟
* 验证节点选举周期（正式网）：12 个分红周期，1800个块，约60分钟
* 用户投票赎回冻结期：72 个选举周期，测试网约 0.5 天，正式网约 3 天
* 节点抵押赎回锁定期：720 个选举周期，测试网约 5 天，正式网约 30 天

### 交易接口：注册节点

* 参数：节点名
* 判断：任何人都可以提交，节点名小于16字节，并且不能重复

初始化该节点的票龄信息，并将初始状态设置为‘退选’

### 交易接口：更新节点

* 参数：网址、简介、出块账户ID、状态（参选|退选）
* 判断：只有已注册节点可以调用，网址字节范围是4到24，只能数字、大小写字母和. ，简介小于128字节。

如果参选节点数小于 最小验证节点数 则不能退选，其余情况下直接更新节点信息。

### 交易接口：设置信托

* 参数：链ID、简介、热公钥、冷公钥
* 判断：只有参选节点可以调用，链目前只能是Bitcoin，并且公钥格式正确。

更新节点的信托设置，只有正确设置了所有链的信托，才可能被选举为信托节点。

### 交易接口：增加投票

* 参数：节点账户ID、增加金额、备注
* 判断：任何人都可以调用，节点账户必须存在，增加金额需小于用户的 PCX 可用余额，备注小于64字节

如果正确，则增加用户的投票，并更新用户和节点的票龄信息。

### 交易接口：赎回投票

* 参数：节点账户ID、赎回金额、备注
* 判断：只有投票了该节点的用户才能调用，赎回金额需小于等于原投票金额，备注小于64字节

如果正确，则扣减用户的投票，并新增赎回记录，计算赎回解冻高度（需判断是赎回节点自抵押，还是普通用户投票），并更新用户和节点的票龄信息。用户赎回节点的投票后，赎回锁定中的资金不会在产生收益。

### 交易接口：赎回解冻

* 参数：节点账户ID、索引
* 判断：只有用户存在该索引对应的赎回操作才可以调用，而且当前高度必须大于解锁高度。

如果正确，则将赎回金额转变为用户的可用余额，并删除赎回记录。

### 交易接口：提取利息








BTC和SDOT相当于两个虚拟节点，通过自身的总发行量来折合各自的“总得票数”，与下面的真实投票节点的总得票数，一起衡量比例关系，平分每个周期发行的PCX。每个周期的奖励打入一个无人知道私钥的特殊账户，作为该虚拟节点的奖池，奖池账户计算逻辑为hash（币种名称）。用户在虚拟节点的待领利息不是自动分配，而是需要用户手工提息时再计算。

每个虚拟节点 有如下属性：总币龄、总币龄更新高度，在各资产的发行量有变化是更新，比如充值和提现确认时：

```
总币龄 = 老总币龄 + 老发行量 *（当前高度 - 老总币龄更新高度）
总币龄更新高度 = 当前高度
```

用户在虚拟节点都有如下属性：用户币龄、用户币龄更新高度，在各用户持有该种资产的量有变化时更新，比如转账、币币交易成交、提现确认时：

```
用户币龄 = 老用户币龄 + 老用户持有量 *（当前高度 - 老用户币龄更新高度）
用户币龄更新高度 = 当前高度
```

则如果用户持有某种资产，可以先获取虚拟节点和用户的币龄信息，然后根据当前高度，实时在前端计算待领利息，计算逻辑为：

```
最新总币龄 = 总币龄 + 发行量 *（当前高度 - 总币龄更新高度）
最新用户币龄 = 用户币龄 + 持有量 *（当前高度 - 用户币龄更新高度）
总待领利息 = （最新用户币龄 / 最新总币龄） * 奖池金额
用户待领利息 = 总待领利息 * 90%，渠道或议会待领利息 = 总待领利息 * 10%。
```

之所以要加上90%，是因为用户每次手动提息时，会查询用户的充值渠道，如果存在则将利息的10%打给渠道，如果不存在则打给议会财政账户，作为社区发展基金。