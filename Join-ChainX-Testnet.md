## 加入ChainX测试网

在开始以下步骤前，请了解 [加入主网 ](Join-ChainX-Mainnet) 的相关内容，ChainX测试网的功能与主网相同。

ChainX的测试网采用：

1. ChainX地址与主网地址的版本不相同，也就是**相同的私钥，在ChainX主网和测试网下的地址是不相同的**
2. ChainX测试网的Bitcoin采用的是比特币测试网，即 `Bitcoin Testnet`，而非其他比特币测试网

### 钱包接入测试网节点

**请下载最新的钱包，链接[下载](https://github.com/chainx-org/chainx-wallet/releases)**

钱包自`v1.0.4`版本之后提供了切换测试网的功能：

![image](https://user-images.githubusercontent.com/5023721/62120182-ae257c00-b2f3-11e9-9e5e-b2c1e65ee0f1.png)

1. 点击钱包右上角设置按钮
2. 选择网络类型中选择“测试网”，选择后，钱包页面会进行重置，此时钱包中的存储将会使用全新的存储，和主网存储隔离
3. 点击“添加节点”，可以添加**测试网节点**的websocket地址和端口，主网节点无法添加
4. 点击“添加api”，可以添加**测试网api**。这里可以填写主网的api，但是没有意义。

若设置节点成功，则该钱包正常使用测试网。

### ChainX 提供的测试网节点

ChainX当前提供了几个测试网节点：

* 节点1：websocket: `39.96.178.97:8087`,  rpc: `39.96.178.97:8086`
* 节点2：websocket: `39.105.37.131:8087`,  rpc: `39.105.37.131:8086`
* 节点3：websocket: `39.104.98.7:8087`,  rpc: `39.104.98.7:8086`
* 节点4：websocket: `39.104.97.79:8087`,  rpc: `39.104.97.79:8086`

**ChainX测试网的api暂未提供**

* 待补充

### 运行ChainX测试网节点

**请下载最新的ChainX二进制，链接[下载](https://github.com/chainx-org/ChainX/releases)**。由于下一章节描述的问题，请下载`v1.0.5`版本，`v1.0.6`版本以及最新的版本的二进制

测试网的节点浏览器为：[https://stats.chainx.org/#list/ChainX%20Testnet](https://stats.chainx.org/#list/ChainX Testnet)

ChainX测试网节点自`v1.0.4`版本可使用主网的二进制进行启动，只需要稍许修改配置即可。

ChainX测试网启动配置`config.json`：

```bash
{
	"chain": "testnet", // 当 chain 指定位 testnet时，以测试网的genesis即配置启动节点
	// 其他配置请参照主网配置
	"bootnodes":[  // 由于测试网没有内置种子节点，因此启动测试网的用户请一定填写测试网的种子
	
	]
}
```

**其他配置项请参照主网配置进行修改**

ChainX目前提供的种子节点：

```bash
"bootnodes":[
	"/ip4/39.96.178.97/tcp/20222/p2p/QmUKBbrRE682raePUvB5okupiyzt1YdXq9GroXFZRNAwGS"
]
```

**启动方式也与主网相同**

### 测试网节点的区块同步

**由于测试网在1.0.5-1.0.6的升级过程中没有严格按照升级流程执行，因此若使用最新的ChainX二进制进行同步，会在`2057083`这个块卡住。**

导致这个问题的原因是在1.0.5-1.0.6的升级过程中使用相同的版本号1.0.6升级了2次链上的wasm代码。因此在使用wasm同步的过程中，会由于版本号与wasm内容不一致导致无法继续同步。

因此**对于测试网**而言，我们推荐使用如下步骤进行同步：

1. 若从0开始同步：
   1. 首先使用`v1.0.5` 版本的ChainX二进制节点进行同步，同步至块高`2057083`时会自然卡住，无法同步。块高参加日志，或从监控台https://stats.chainx.org/#list/ChainX%20Testnet看到
   2. 然后将节点停止，并使用`v1.0.6`版本的ChainX二进制替换`v1.0.5`版本，重启进行同步。此时应该可以正常同步
   3. 只要同步超过`2057083`块高，后续可在任何时间使用最新节点替换当前同步的节点。
2. 从超过块高`2057083`的数据包继续同步
   1. 由于该问题由ChainX升级不当导致，因此ChainX直接提供一个同步超过`2057083`块高的数据包。
   2. 下载链接为：`47.111.133.215/db_over_2057083.tar.gz`
   3. 替换数据包的方式请参考运维文档：[运维文档/6. ChainX(Substrate)模型下的数据存储位置](devops.md/6-ChainX(Substrate)模型下的数据存储位置) 中的相应描述进行数据替换

